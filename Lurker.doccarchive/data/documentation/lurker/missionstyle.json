{"seeAlsoSections":[{"title":"Enumerations","identifiers":["doc:\/\/Lurker\/documentation\/Lurker\/LurkerError"],"generated":true}],"schemaVersion":{"major":0,"minor":2,"patch":0},"metadata":{"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MissionStyle"}],"title":"MissionStyle","roleHeading":"Enumeration","role":"symbol","symbolKind":"enum","externalID":"s:6Lurker12MissionStyleO","modules":[{"name":"Lurker"}],"navigatorTitle":[{"kind":"identifier","text":"MissionStyle"}]},"abstract":[{"type":"text","text":"The type of background task to schedule; can be either a brief task or an"},{"type":"text","text":" "},{"type":"text","text":"extended one."}],"sections":[],"identifier":{"url":"doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle","interfaceLanguage":"swift"},"relationshipsSections":[{"identifiers":["doc:\/\/Lurker\/SQ","doc:\/\/Lurker\/SH"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"hierarchy":{"paths":[["doc:\/\/Lurker\/documentation\/Lurker"],["doc:\/\/Lurker\/documentation\/Lurker","doc:\/\/Lurker\/documentation\/Lurker\/DesigningMissions"],["doc:\/\/Lurker\/documentation\/Lurker","doc:\/\/Lurker\/documentation\/Lurker\/UsingLurker"],["doc:\/\/Lurker\/documentation\/Lurker","doc:\/\/Lurker\/documentation\/Lurker\/UsingLurker","doc:\/\/Lurker\/documentation\/Lurker\/DesigningMissions"]]},"topicSections":[{"title":"Cases","identifiers":["doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/brief","doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/extended"]},{"title":"Default Implementations","identifiers":["doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/Equatable-Implementations"],"generated":true}],"variants":[{"paths":["\/documentation\/lurker\/missionstyle"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"symbol","primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MissionStyle"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are two styles to choose from for background tasks: brief and extended. Each has its own benefits and drawbacks and is designed for a specific purpose. Your custom implementation(s) of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/Mission"},{"type":"text","text":" should take these details into account (they also require you to declare the task style ahead of time)."}]},{"anchor":"Brief-Tasks","level":3,"type":"heading","text":"Brief Tasks"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Brief tasks are designed to modularly refresh app data. This is traditionally accomplished by making a single network call to update a local data store or cache. The result is a faster app launch experience with less load time for users after opening your app."}]},{"type":"aside","style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"iOS currently limits the number of scheduled brief tasks to 10. Lurker will verify this for you and "},{"type":"codeVoice","code":"throw"},{"type":"text","text":" a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/LurkerError"},{"type":"text","text":" if you exceed this limit when registering tasks."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The example below illustrates a suggested implementation for this type of task using swift concurrency (although its use is not required)."}]},{"type":"codeListing","syntax":"swift","code":["func runTask(_ taskInfo: BGTask) async -> Bool {","    let fetchTask = Task { () -> AVeryNiceModel in","        let url = URL(string: \"https:\/\/averyniceRESTapi.com\/api\/fetch\/averynicemodel\")!","","        do {","            let (data, _) = try await URLSession.shared.data(from: url)","            let model = try JSONDecoder().decode(AVeryNiceModel.self, from: data)","            return model","        } catch {","            return AVeryNiceModel.empty","        }","    }","    ","    taskInfo.expirationHandler { expiration in","        fetchTask.cancel()","    }","    ","    let result = await fetchTask.value","    if result.status != .empty {","        LocalDataStore.shared.refreshCache(with: result)","        taskInfo.setTaskCompleted(success: true)","    } else {","        taskInfo.setTaskCompleted(success: false)","    }","}"]},{"type":"aside","style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Brief tasks should last no longer than 30 seconds. Any background process still running after this time may be terminated by the system. Additionally, there is no guarantee that your task will be alotted an entire 30 seconds. Use the "},{"type":"codeVoice","code":"taskInfo"},{"type":"text","text":" parameter’s "},{"type":"codeVoice","code":"expirationHandler"},{"type":"text","text":" provided by your Mission’s "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/Mission\/runTask(_:)"},{"type":"text","text":" function to cancel any unfinished work."}]}]},{"anchor":"Extended-Tasks","level":3,"type":"heading","text":"Extended Tasks"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Extended tasks are designed to manage heavy workloads, such as training or updating a machine learning model or cleaning up database files. These tasks are usually scheduled to run when the system determines it will have a minimal impact on battery life and performance (e.g. overnight while charging)."}]},{"type":"aside","style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"iOS currently limits the number of scheduled extended tasks to 1. Lurker will verify this for you and "},{"type":"codeVoice","code":"throw"},{"type":"text","text":" a  "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/LurkerError"},{"type":"text","text":" if you exceed this limit when registering tasks."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The implementation for an extended task is largely the same as the example shown above. The primary difference is that you are not strictly limited to 30 seconds, as with brief tasks. However, the system may interrupt and end your task if the user begins using their device (so you still need to implement the expiration handler to do any cleanup!)."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Extended tasks require enabling the "},{"type":"codeVoice","code":"processing"},{"type":"text","text":" UIBackgroundModes capability in your application’s entitlements."}]}]}]}],"references":{"doc://Lurker/documentation/Lurker/DesigningMissions":{"role":"collectionGroup","title":"Designing Missions","abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"Mission"},{"type":"text","text":" encapsulates a singular background task or piece of work to perform. The "},{"type":"codeVoice","code":"Mission"},{"type":"text","text":" protocol defines a few parameters that your subclass will need to provide and a function where work can be performed."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/DesigningMissions","kind":"article","type":"topic","url":"\/documentation\/lurker\/designingmissions"},"doc://Lurker/documentation/Lurker/Mission/runTask(_:)":{"role":"symbol","title":"runTask(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"runTask"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"BGTask","preciseIdentifier":"c:objc(cs)BGTask"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Asynchronous function called by a "},{"type":"codeVoice","code":"Lurker"},{"type":"text","text":" that gets registered and then"},{"type":"text","text":" "},{"type":"text","text":"executed later in the background."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/Mission\/runTask(_:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/lurker\/mission\/runtask(_:)"},"doc://Lurker/documentation/Lurker/MissionStyle/brief":{"role":"symbol","title":"MissionStyle.brief","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"brief"}],"abstract":[{"type":"text","text":"A short refresh task."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/brief","kind":"symbol","type":"topic","url":"\/documentation\/lurker\/missionstyle\/brief"},"doc://Lurker/SQ":{"type":"unresolvable","title":"Swift.Equatable","identifier":"doc:\/\/Lurker\/SQ"},"doc://Lurker/SH":{"type":"unresolvable","title":"Swift.Hashable","identifier":"doc:\/\/Lurker\/SH"},"doc://Lurker/documentation/Lurker/LurkerError":{"role":"symbol","title":"LurkerError","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"LurkerError"}],"abstract":[{"type":"text","text":"Potential errors that may occur when registering background tasks."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/LurkerError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"LurkerError"}],"url":"\/documentation\/lurker\/lurkererror"},"doc://Lurker/documentation/Lurker/UsingLurker":{"role":"collectionGroup","title":"Using Lurker","abstract":[{"type":"text","text":"Lurker makes it easy to setup, schedule, and manage background tasks in your app. Learn how to get up and running with Lurker once you’ve configured your app for background tasks."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/UsingLurker","kind":"article","type":"topic","url":"\/documentation\/lurker\/usinglurker"},"doc://Lurker/documentation/Lurker/MissionStyle/extended":{"role":"symbol","title":"MissionStyle.extended","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"extended"}],"abstract":[{"type":"text","text":"A processing task that can take minutes to complete."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/extended","kind":"symbol","type":"topic","url":"\/documentation\/lurker\/missionstyle\/extended"},"doc://Lurker/documentation/Lurker/MissionStyle/Equatable-Implementations":{"role":"collectionGroup","title":"Equatable Implementations","abstract":[],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle\/Equatable-Implementations","kind":"article","type":"topic","url":"\/documentation\/lurker\/missionstyle\/equatable-implementations"},"doc://Lurker/documentation/Lurker/MissionStyle":{"role":"symbol","title":"MissionStyle","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"MissionStyle"}],"abstract":[{"type":"text","text":"The type of background task to schedule; can be either a brief task or an"},{"type":"text","text":" "},{"type":"text","text":"extended one."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/MissionStyle","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MissionStyle"}],"url":"\/documentation\/lurker\/missionstyle"},"doc://Lurker/documentation/Lurker/Mission":{"role":"symbol","title":"Mission","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Mission"}],"abstract":[{"type":"text","text":"A specific, isolated task that can be run in the background."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker\/Mission","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Mission"}],"url":"\/documentation\/lurker\/mission"},"doc://Lurker/documentation/Lurker":{"role":"collection","title":"Lurker","abstract":[{"type":"text","text":"An abstraction over the system’s Background Task API."}],"identifier":"doc:\/\/Lurker\/documentation\/Lurker","kind":"symbol","type":"topic","url":"\/documentation\/lurker"}}}